<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Course website for Biol 520C: Statistical modelling for biological data</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="tutorial.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Biol 520C Statistical modelling for biological data &mdash; UBC-Okanagan</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="Lectures.html">Lectures</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Practicals
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_R_Introduction.html">Practical 01</a>
    </li>
    <li>
      <a href="02_Regression.html">Practical 02</a>
    </li>
    <li>
      <a href="03_MLR_Residuals.html">Practical 03</a>
    </li>
    <li>
      <a href="04_Visualisation.html">Practical 04</a>
    </li>
    <li>
      <a href="05_MEM_Model_Selection.html">Practical 05</a>
    </li>
    <li>
      <a href="06_Heteroskedasticity_Autocorrelation.html">Practical 06</a>
    </li>
    <li>
      <a href="07_Spatial_and_Phylogenetic_Autocorrelation.html">Practical 07</a>
    </li>
    <li>
      <a href="08_GLMs_for_Count_Data.html">Practical 08</a>
    </li>
    <li>
      <a href="09_Logistic_Regression.html">Practical 09</a>
    </li>
    <li>
      <a href="10_Stochastic_Simulation.html">Practical 10</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Datasets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Practical_Datasets.html">Practicals</a>
    </li>
    <li>
      <a href="Paper_Datasets.html">Papers</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    R Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Plotting.html">Plotting</a>
    </li>
    <li>
      <a href="for_loops.html">for loops</a>
    </li>
    <li>
      <a href="Simulation.html">Simulation</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Course website for Biol 520C: Statistical modelling for biological data</h1>

</div>


<div id="course-description" class="section level2">
<h2>Course Description</h2>
<p>Advanced course on biostatistics focused on combining data with models to generate mechanistic descriptions of biological patterns. Building from simple linear regression, the course teaches regression methods for handling the most routinely encountered features in biological data. Emphasis is placed on understanding and interpreting the analyses in biological terms and linking analyses to theoretical or applied questions. The course is divided into core lectures and practicals.</p>
</div>
<div id="course-objectives" class="section level2">
<h2>Course Objectives</h2>
<p>This course combines lectures on theory and concepts with time practicing statistical tools in <code>R</code> based software packages. The course is designed to equip students with the tools and knowledge they need to perform a variety of regression-based analyses that can model common features of biological data. For each topic, there will be a core lecture module and a lab based practical module. With the lectures, students will learn the theory behind core modelling tools including multiple linear regression, mixed effects models, generalised linear models, and generalised least squares, while the lab modules are intended to provide a pathway that students can follow over the longer term as their skills develop.</p>
<p>Learning Outcomes:</p>
<ul>
<li>Fit regression models via maximum likelihood</li>
<li>Interpret residuals to assess/improve a model’s fit</li>
<li>Fit models with fixed and random effects</li>
<li>Fit models with non-Gaussian error distributions</li>
<li>Fit non-linear models</li>
<li>Handle non-independence in data, including phylogenetic inertia and temporal/spatial autocorrelation</li>
<li>Perform AIC-based model selection</li>
<li>Build models to simulate data and conduct power analyses</li>
<li>Link questions, analyses, and studying design</li>
</ul>
</div>
<div id="course-format" class="section level2">
<h2>Course Format</h2>
<p><strong>Lectures</strong>: Lectures will cover the core concepts of the course. Lecture slides will be posted on the course website the evening prior to the lecture. Students are encouraged to take notes, and to ask questions in the lectures. Lectures will be given in Zoom and a link to the lecture is available here (Links to an external site.) and in the Canvas navigation sidebar. All lectures will be recorded and made available to the students. Calculators will be useful in the lectures but are not mandatory. Questions will be used throughout the lectures to reinforce key concepts. No grades are assigned to these questions, but and students are encouraged to answer these to the best of their ability in order to assist them in tracking their progress.</p>
<p><strong>Practicals</strong>: The practicals use structured tutorials to guide students on the use of the open-source software program R for applying the methods learned in the lectures to data. The lectures will cover the material required for students to complete the practical assignments, however, they are designed to be complementary and not all the material in the practicals will be covered in the lectures and vice versa. These also provide training on communicating the results of statistical analyses, with a focus on reproducibility. Assessment of student learning will be based on submitted assignments (see detailed schedule below).</p>
<p><strong>Core project</strong>: The core research project is a major component of the course and is designed to train students in data analysis and presentation using best practices in open science. The core project is divided into 3 components aimed at replicating the typical analytical process: 1) initial hypothesis and expected outcome(s); 2) a verbal presentation of the analyses and findings; and 3) the submission of a paper describing the work (see details below).</p>
</div>
<div id="pre-course-checklist" class="section level2">
<h2>Pre-course Checklist</h2>
<ul>
<li>The material learned in most entry level statistics course provides important background and context on the topics that will be covered in this course. It is recommended that you re-familiarise yourself with this material before the course (e.g., understand the differences between means, medians, and modes, variances, standard deviations, etc.).</li>
<li>To fully engage in all of the course material will require a basic familiarity with R. Working through the book `R for Beginners’ by Paradis (available at <a href="https://cran.r-project.org" class="uri">https://cran.r-project.org</a> (Links to an external site.) –&gt; ~Documentation/Contributed) before beginning the course is a good idea if you want to improve with R or with coding. Alternatively, the swirl R package (available at: <a href="https://swirlstats.com/students.html" class="uri">https://swirlstats.com/students.html</a> (Links to an external site.)) teaches R programming and data science interactively, at your own pace, and right in the R console.</li>
<li>If you intend to use your personal computer during the course, it is a good idea to try and install R, and RStudio before the course.</li>
</ul>
</div>
<div id="optional-material" class="section level2">
<h2>Optional Material</h2>
<p>There is no textbook for this course, but if students are interested in expanding their knowledge beyond what is covered in the course, the following textbooks are recommended:</p>
<ul>
<li>Bolker, B. M. (2008). Ecological models and data in R. Princeton University Press.</li>
<li>Hilborn R, Mangel M. The ecological detective: confronting models with data. 1997. Princeton University Press. ISBN 978-0691034973.</li>
<li>Zuur, A., Ieno, E. N., Walker, N., Saveliev, A. A., &amp; Smith, G. M. (2009). Mixed effects models and extensions in ecology with R. Springer Science &amp; Business Media.</li>
</ul>
</div>
<div id="course-evaluation" class="section level2">
<h2>Course Evaluation</h2>
<p>The assignments and evaluation for this course are structured along two distinct, but complimentary lines: i) guided practical assignments; and ii) a core research project. The practical assignments are designed to provide students with the opportunity to learn how to apply the methods learned in the lectures to real data using the statistical software R. The core research project is designed to train students in data analysis and presentation using best practices in open science. The core project is divided into 3 components aimed at replicating the typical analytical process: 1) initial hypothesis and expected outcome(s); 2) a verbal presentation of the analyses and findings; and 3) the submission of a paper describing the work.</p>
<table>
<colgroup>
<col width="42%" />
<col width="7%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Hypothesis and expected outcome(s)</td>
<td>5%</td>
<td>Week 4</td>
</tr>
<tr class="even">
<td>Paper</td>
<td>35%</td>
<td>Week 13</td>
</tr>
<tr class="odd">
<td>Presentation</td>
<td>10%</td>
<td>Weeks 12 &amp; 13</td>
</tr>
<tr class="even">
<td>Practicals (10)</td>
<td>40%</td>
<td>Due on ~weekly basis (see schedule below)</td>
</tr>
<tr class="odd">
<td>Participation from practicals</td>
<td>10%</td>
<td>Due on ~weekly basis (see schedule below)</td>
</tr>
<tr class="even">
<td>Total</td>
<td>100%</td>
<td></td>
</tr>
</tbody>
</table>
<div id="practical-assignments-and-participation-50" class="section level3">
<h3>Practical Assignments and Participation (50%)</h3>
<p>Beginning the first week of class, students will be asked to complete practical assignments on an approximately weekly basis (schedule below). There will be a total of 10 practicals to be completed throughout the course. Each is designed to provide students with the opportunity to learn how to apply the methods learned in the lectures to data using the statistical software R. The purpose of these practical assignments is to ensure that students have the practical skills necessary to complete effective statistical analyses and data presentation that are central to science. The skills gained by completing each week’s assignment will help students complete their theses and research projects. The course web page on github will host the practicals, and the various datasets associated with each practical. Lectures will be given on Tuesdays and Thursdays. After the Thursdays lecture, we will have covered all of the material that is needed to complete the week’s practical assignment material which is due before the start of the following Thursday lecture (to be submitted online via canvas).</p>
<p><strong>Grading</strong>: Students are to submit answers to all questions in the practical. Each practical assignment is worth a total of 5% of your total grade. Of this, 1% is given for submitting the tutorial on time, irrespective of whether or not the answers are correct. This is intended as the participation component of the course. The remaining 4% comes from the answers provided. Solutions to each the practicals will be posted after the weekly submission deadline. Late practicals will be accepted after the solutions have been posted, but no participation grade will be given.</p>
</div>
<div id="hypothesis-and-expected-outcomes-5" class="section level3">
<h3>Hypothesis and expected outcome(s) (5%)</h3>
<p>At the end of week four, students will be expected to submit a one page proposal describing the study system they will be working on for their course project, the initial hypothesis, the expected outcome, and the data that they will be using to address this question.</p>
<p><strong>Grading</strong>: All submitted proposals will receive a grade of 5/5. Late assignments will receive a grade of 0. In addition, no other assignment related to the core project will be accepted until the study proposal has been submitted.</p>
</div>
<div id="papers-35" class="section level3">
<h3>Papers (35%)</h3>
<p>Students will be required to complete one core written assignments for this course. This assignment is designed to provide students with an opportunity to apply what they have learned in the lectures and practicals in an unguided format as they would if they were analysing data outside of a classroom setting. For this paper, students will apply the modelling tools covered in the lectures on an empirical dataset (details below) and write a short scientific paper about their work on these data and summarise their findings. This paper should be comprised of six sections: Introduction, Methods, Results, Discussion, References, and an Appendix Section.</p>
<p><em>Introduction</em>: Provide a brief description of the study system from which the data come and an outline of what questions you intend on exploring with the data, citing all relevant literature. Length: ca. 1-2 pages.</p>
<p><em>Methods</em>: Briefly describe how the data were collected and what variables are included. Provide a detailed description of the analytical workflow that was applied to the data, citing all relevant literature and statistical packages employed. There should be enough information that anyone can reproduce the workflow if they had access to the data. Length: As long as necessary.</p>
<p><em>Results</em>: Length: Describe your statistical findings. Tables and figures should be used throughout. Length: As long as necessary.</p>
<p><em>Discussion</em>: Provide a brief summary of your findings and place them in a biological context. Length: ca. 1-2 pages</p>
<p><em>References</em>: Include references to all necessary literature.</p>
<p><em>Appendix</em>: The appendix material should include an html document created via R markdown that details every step of the analyses. The code should be commented and clearly show how you arrived at the numbers presented in your results from the data on hand.</p>
<p><strong>Datasets</strong>: To complete these assignments, students will have access to a number of pre-selected datasets. Students can opt to use their own data to complete these assignments if they prefer, and are highly encouraged to do so, but must seek instructor approval. If you intend on using your own data, it is recommended that you discuss this with the instructor as early as possible. The pre-selected datasets are available on the course website.</p>
<p><strong>Grading</strong>: Students are to submit their final paper by the end of the day on Sunday of the 13th week of the course Papers will be graded out of 100, and will be worth a total of 35% of your total grade. Each section has the following value: Introduction 10%, Methods 25%, Results 20%, Discussion 10%, References 5%, and an Appendix Section 30%. Late papers will have 10% deducted per day that they are overdue, and will receive a grade of zero if more than 10 days late without a valid excuse.</p>
</div>
<div id="presentations-10" class="section level3">
<h3>Presentations (10%)</h3>
<p>Prior to submitting their papers to the instructor, students will be required to give a 15-minute presentation to the class. The presentation should include all of the sections that are included in the paper (detailed above), however the appendix detailing the R code that was used should be integrated into the methods section of the presentation.</p>
<p><strong>Grading</strong>: Grading will based on <a href="Biol520C_Presentation_Rubric.pdf" target="_blank">the following rubric.</a></p>
</div>
</div>
<div id="lecture-outline" class="section level2">
<h2>Lecture Outline</h2>
<p>(Approximate schedule of topics covered in lectures)</p>
<table>
<colgroup>
<col width="8%" />
<col width="41%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Week</th>
<th>Lecture Topics</th>
<th>Practical Assignment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Course introduction; Regression refresher</td>
<td>Practical 01: Introduction to R as a programming language (4%)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Probability theory; Likelihood; Maximum likelihood</td>
<td>Practical 02: Deterministic and stochastic models, simple linear regression, and maximum likelihood (4%)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Multiple linear regression; Parameter interactions; Interpreting residuals</td>
<td>Practical 03: Multiple linear regression, Residuals (4%)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Mixed effects models; Model Selection; Information criterion</td>
<td>Practical 04: Data visualisation (4%); Hypothesis and predictions due (5%)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Model Selection; Model averaging; Heteroskedasticity</td>
<td>Practical 05: Mixed effect models, model selection, and model averaging (4%)</td>
</tr>
<tr class="even">
<td>6</td>
<td>Temporal autocorrelation; Spatial Autocorrelation</td>
<td>Practical 06: Heteroskedasticity; Autocorrelation Function; Models with autocorrelated errors (4%)</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Phylogenetic inertia; Phylogenetically controlled regression</td>
<td>Practical 07: Spatial and Phylogenetic Autocorrelation (4%)</td>
</tr>
<tr class="even">
<td>8</td>
<td>Non-Gaussian residuals; Generalised linear regression Poisson and Logistic regression</td>
<td>Practical 08: Generalised Linear Models for Count Data (4%)</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Zero-inflated data; Non-linear modelling; Deterministic functions</td>
<td>Practical 09: GLMs for Binary and Proportion Data (4%)</td>
</tr>
<tr class="even">
<td>10</td>
<td>Stochastic simulation and power analysis; Course Overview</td>
<td>Practical 10: Stochastic Simulations, Power Analysis, Non-linear models (4%)</td>
</tr>
<tr class="odd">
<td>11</td>
<td>Independent Project Work</td>
<td>No Practical</td>
</tr>
<tr class="even">
<td>12</td>
<td>Student presentations (10%)</td>
<td>No Practical</td>
</tr>
<tr class="odd">
<td>13</td>
<td>Student presentations (10%)</td>
<td>Term paper due (35%)</td>
</tr>
</tbody>
</table>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
